version: '3.8'\n\nservices:\n  backend:\n    image: ${DOCKER_USERNAME}/school-support-backend:latest\n    container_name: school-support-backend\n    restart: unless-stopped\n    environment:\n      - DB_NAME=${DB_NAME}\n      - DB_USER=${DB_USER}\n      - DB_PASSWORD=${DB_PASSWORD}\n      - DB_HOST=mysql\n      - DB_PORT=3306\n      - SECRET_KEY=${SECRET_KEY}\n      - DEBUG=False\n      - ALLOWED_HOSTS=${ALLOWED_HOSTS}\n      - CORS_ALLOWED_ORIGINS=${CORS_ALLOWED_ORIGINS}\n    ports:\n      - \"8000:8000\"\n    depends_on:\n      - mysql\n    networks:\n      - school-support-network\n\n  mysql:\n    image: mysql:8.0\n    container_name: school-support-mysql\n    restart: unless-stopped\n    environment:\n      - MYSQL_DATABASE=${DB_NAME}\n      - MYSQL_USER=${DB_USER}\n      - MYSQL_PASSWORD=${DB_PASSWORD}\n      - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}\n    volumes:\n      - mysql_data:/var/lib/mysql\n    ports:\n      - \"3306:3306\"\n    networks:\n      - school-support-network\n\n  nginx:\n    image: nginx:alpine\n    container_name: school-support-nginx\n    restart: unless-stopped\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf\n      - ./ssl:/etc/nginx/ssl\n    depends_on:\n      - backend\n    networks:\n      - school-support-network\n\nvolumes:\n  mysql_data:\n\nnetworks:\n  school-support-network:\n    driver: bridge